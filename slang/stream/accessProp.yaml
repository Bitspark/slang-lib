services:
  main:
    in:
      type: stream
      stream:
        type: map
        map:
          key:
            type: generic
            generic: keyType
          value:
            type: generic
            generic: valueType
    out:
      type: generic
      generic: valueType
operators:
  access:
    operator: .access
    properties:
      default: $default
    generics:
      keyType:
        type: generic
        generic: keyType
      valueType:
        type: generic
        generic: valueType
  key:
    operator: slang.const
    properties:
      value: $key
    generics:
      valueType:
        type: generic
        generic: keyType
properties:
  default:
    type: generic
    generic: valueType
  key:
    type: generic
    generic: keyType
connections:
  (:
  - (key
  ~(:
  - stream.~(access
  access):
  - )
  key):
  - key(access

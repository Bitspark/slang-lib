# Stream length test
---
operatorFile: accessProp.yaml
testCases:
- name: Simple
  generics:
    keyType:
      type: string
    valueType:
      type: number
  properties:
    key: "b"
    default: null
  data:
    in:
    - [{key: "a", value: 1}, {key: "b", value: 2}]
    - [{key: "a", value: 3}, {key: "b", value: 6}, {key: "c", value: 1}]
    - [{key: "a", value: 3}, {key: "c", value: 1}]
    out:
    - 2
    - 6
    - null
- name: Map
  generics:
    keyType:
      type: string
    valueType:
      type: map
      map:
        a:
          type: number
        b:
          type: boolean
  properties:
    key: "c"
    default: {a: -1, b: false}
  data:
    in:
    - [{key: "a", value: {a: 1, b: true}}, {key: "b", value: {a: 1, b: true}}]
    - [{key: "a", value: {a: 1, b: true}}, {key: "b", value: {a: 1, b: false}}, {key: "c", value: {a: 3, b: true}}]
    - [{key: "a", value: {a: 1, b: true}}, {key: "c", value: {a: 3, b: false}}]
    out:
    - {a: -1, b: false}
    - {a: 3, b: true}
    - {a: 3, b: false}
- name: Stream
  generics:
    keyType:
      type: string
    valueType:
      type: stream
      stream:
        type: number
  properties:
    key: "c"
    default: []
  data:
    in:
    - [{key: "c", value: [1]}]
    - [{key: "a", value: []}, {key: "b", value: []}, {key: "c", value: [1,2,3]}]
    - [{key: "a", value: []}, {key: "b", value: [1,2]}]
    - [{key: "a", value: []}, {key: "c", value: [9,8,7]}]
    out:
    - [1]
    - [1,2,3]
    - []
    - [9,8,7]
- name: Stream of streams
  generics:
    keyType:
      type: string
    valueType:
      type: stream
      stream:
        type: stream
        stream:
          type: number
  properties:
    key: "c"
    default: []
  data:
    in:
    - []
    - [{key: "a", value: []}, {key: "c", value: [[9,8,7],[]]}]
    - [{key: "a", value: []}, {key: "b", value: [[]]}, {key: "c", value: [[1,2,3],[],[4]]}]
    - [{key: "a", value: []}, {key: "c", value: [[1,2,3],[],[4]]}]
    - [{key: "a", value: [[],[]]}, {key: "b", value: [[1,2]]}]
    - [{key: "a", value: []}, {key: "c", value: [[9,8,7],[]]}]
    - [{key: "c", value: [[1],[2]]}]
    out:
    - []
    - [[9,8,7],[]]
    - [[1,2,3],[],[4]]
    - [[1,2,3],[],[4]]
    - []
    - [[9,8,7],[]]
    - [[1],[2]]
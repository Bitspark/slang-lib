services:
  main:
    in:
      type: stream
      stream:
        type: number
    out:
      type: number
operators:
  halve:
    operator: slang.eval
    properties:
      expression: floor(x/2)
      variables:
      - x
  length:
    operator: slang.stream.length
    generics:
      itemType:
        type: number
  sorter:
    operator: slang.stream.mergeSort
  takeNth:
    operator: slang.stream.takeNth
    properties:
      default: $emptyValue
    generics:
      itemType:
        type: number
properties:
  emptyValue:
    type: generic
    generic: emptyType
connections:
  (:
  - (sorter
  - (length
  halve):
  - index(takeNth
  length):
  - x(halve
  sorter):
  - items(takeNth
  takeNth)item:
  - )
